<!-- Navbar fija arriba -->
<nav class="fixed top-0 z-50 w-full bg-white border-b border-gray-200 dark:bg-gray-800 dark:border-gray-700">
  <div class="px-3 py-2.5 lg:px-5 lg:pl-3">
    <div class="flex items-center justify-between">
      <div class="flex items-center justify-start">
        <!-- Botón hamburguesa solo en móvil -->
        <button data-drawer-target="sidebar" data-drawer-toggle="sidebar" aria-controls="sidebar" type="button"
          class="inline-flex items-center p-2 text-sm text-gray-500 rounded-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700"
          [class.hidden]="isLargeScreen">
          <span class="sr-only">Abrir sidebar</span>
          <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd"
              d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
              clip-rule="evenodd"></path>
          </svg>
        </button>

        <!-- Logo -->
        <a href="#" class="flex ml-2 md:mr-24">
          <img src="https://flowbite.com/docs/images/logo.svg" class="h-8 mr-3" alt="Flowbite Logo" />
          <span class="self-center text-xl font-semibold sm:text-2xl whitespace-nowrap dark:text-white">EcoCheck</span>
        </a>
      </div>

      <!-- Perfil dropdown -->
      <div class="flex items-center relative">
        <button type="button" (click)="dropdownOpen = !dropdownOpen"
          class="flex text-sm bg-gray-800 rounded-full focus:ring-4 focus:ring-gray-300 dark:focus:ring-gray-600"
          id="user-menu-button" [attr.aria-expanded]="dropdownOpen">
          <span class="sr-only">Abrir menú usuario</span>
          <img class="w-10 h-10 rounded-full object-cover" [src]="imagenUrl"
            alt="user photo">
        </button>

        <!-- Dropdown menú -->
        <div
          class="z-50 absolute right-0 top-8 my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700 dark:divide-gray-600"
          id="user-dropdown" [class.hidden]="!dropdownOpen">
          <div class="px-4 py-3">
            <span class="block text-sm text-gray-900 dark:text-white">Neil Sims</span>
            <span class="block text-sm text-gray-500 truncate dark:text-gray-400">neil.sims@flowbite.com</span>
          </div>
          <ul class="py-2" aria-labelledby="user-menu-button">
        
            <li><a href="#" routerLink="/perfil" (click)="dropdownOpen=!dropdownOpen
              "
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200">Ajustes</a>
            </li>
            <li (click)="cerrarSesion()"><a 
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200">Cerrar sesión</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</nav>

<!-- Sidebar -->
<aside id="sidebar"
  class="fixed top-0 left-0 z-40 h-screen pt-20 transition-transform bg-white border-r border-gray-200 dark:bg-gray-800 dark:border-gray-700"
  [class.-translate-x-full]="!isLargeScreen"
  [class.translate-x-0]="isLargeScreen"
  style="width: 256px;"
  aria-label="Sidebar">
  <div class="h-full px-3 pb-4 overflow-y-auto bg-white dark:bg-gray-800">
    <ul class="space-y-2 font-medium">
      <li>
        <a routerLink="/home" [ngClass]="{'bg-gray-100 dark:bg-gray-700': isActive('/home')}"
          class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
          <span
            class="material-symbols-outlined text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white text-3xl"
            style="font-variation-settings: 'FILL' 1;">
            home
          </span>
          <span class="ml-3">Home</span>
        </a>
      </li>
      <li>
        <a routerLink="/empresas" [ngClass]="{'bg-gray-100 dark:bg-gray-700': isActive('/empresas')}"
          class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
          <span
            class="material-symbols-outlined text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white text-3xl"
            style="font-variation-settings: 'FILL' 1;">
            business
          </span>
          <span class="ml-3">Empresas</span>
        </a>
      </li>

      <!--Para cuando el usuario es admin-->
      @if(usuario.roleName.toLowerCase()=='admin'){
        <li>
        <a routerLink="/admin" [ngClass]="{'bg-gray-100 dark:bg-gray-700': isActive('/admin')}"
          class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
          <span
            class="material-symbols-outlined text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white text-3xl"
            style="font-variation-settings: 'FILL' 1;">
            admin_panel_settings
          </span>
          <span class="ml-3">Administración</span>
        </a>
      </li>
      }
      
      <!-- ... el resto de ítems igual que los tuyos ... -->
    </ul>
  </div>
</aside>