<div class="flex flex-col min-h-screen w-full  dark:bg-gray-800">
  <!-- Main content - responsive padding for sidebar -->
  <main
    class="flex-1 w-full  sm:px-6 md:px-8 py-6 md:py-8 bg-[#f6f8f7] dark:bg-gray-800 h-screen md:h-auto overflow-y-auto">
    <div class="w-full max-w-8xl mx-auto pt-15">
      <div class="flex flex-col sm:flex-row gap-4 mb-8">
        <div class="relative grow">
          <span
            class="material-symbols-outlined absolute left-4 top-1/2 bottom-4 -translate-y-1/2 text-gray-400 dark:text-gray-400 pointer-events-none">search</span>

          <input
            class="w-full h-14 pl-16 rounded-xl bg-white dark:bg-gray-700 border border-[#dbe6e0] dark:border-gray-600 text-[#111814] dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-400 placeholder:indent-8 focus:ring-2 focus:ring-[#39E079]/50 focus:border-[#39E079] outline-none transition-shadow"
            placeholder="Buscar productos por nombre, marca..." type="text">
        </div>
        <button
          class="flex items-center justify-center gap-2 h-14 px-5 rounded-xl bg-white dark:bg-gray-700 border border-[#dbe6e0] dark:border-gray-600 text-[#111814] dark:text-white text-base font-semibold leading-normal hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors cursor-pointer">
          <span class="material-symbols-outlined">filter_list</span>
          <span>Filtros</span>
        </button>
        <button (click)="openModalEscaner()" class="flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-14 px-5 bg-primary text-[#111814] gap-2 text-base font-bold leading-normal tracking-[0.015em] hover:b
     g-primary/90 transition-colors">
          <span class="material-symbols-outlined">qr_code_scanner</span>
          <span class="truncate">Escanear</span>
        </button>
      </div>
      <div
        class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4 sm:gap-5 md:gap-6">
        <!-- Updated all dark mode backgrounds from dark:bg-[#182c21] to dark:bg-gray-700 to match sidebar -->

        @for (producto of productos; track producto.id) {
        <!-- Card con efecto hover suave -->
        <div
          class="cards flex flex-col gap-3 p-4 bg-white dark:bg-gray-700 rounded-xl border border-[#dbe6e0] dark:border-gray-600 hover:shadow-xl hover:-translate-y-2 hover:border-[#39E079]/50 dark:hover:border-[#39E079]/50 transition-all duration-300 ease-out cursor-pointer" (click)="abrirDetalle(producto.id)">
          <div class="w-full h-40 bg-cover bg-center rounded-lg"
            style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuC3ORf-FnudDaA1NzV5UvdmmzQpCofGyUeOmYqp59ZNzqs1Q0RlfF8qKyHUGrT-qJ8sPqHw1W3pMc948xO59s3AY4HAcV0uzJTUGuRd0j4ryP79b2Ddxlj8QMyI-yz_19Owq5mFLjVy8uhsmLW5qKQagIIedD5UcDa7QxihO4CUOStI4iqITk6jTR1CEyAoZCDmve56S8lZEjHbWqF2N5A0LTTX4vZJSYO2s65GdC51X5_avEfz4KPExWa-wKb_VqxqS9-lC0GX8wn3');">
          </div>
          <div class="flex flex-col grow">
            <p class="text-sm text-[#618972] dark:text-gray-400">{{producto.nombre}}</p>
            <h3 class="font-bold text-[#111814] dark:text-white leading-tight">{{producto.descripcion}}</h3>
          </div>
          <div class="flex items-center justify-between mt-2">
            <p class="text-xs text-[#618972] dark:text-gray-400">EcoScore</p>
            <div class="flex items-center gap-1 text-lg font-bold text-green-600 dark:text-green-400" [ngClass]="{'text-green-600 dark:text-green-400':producto.ecoScore>80,
              'text-yellow-500 dark:text-yellow-400':producto.ecoScore>50,
              'text-orange-500 dark:text-orange-400':producto.ecoScore>0
            }">
              <span class="material-symbols-outlined text-base"
                style="font-variation-settings: 'FILL' 1, 'wght' 600;">eco</span>
              <span>{{formatNumber(producto.ecoScore)}}</span>
            </div>
          </div>
        </div>
        }


      </div>
    </div>

  </main>
</div>

<!--Modal para el escÃ¡ner-->
@if(modalEscanerOpen){
<app-modal-escaner (closeModal)="closeModalEscaner()" (qrScanned)="obtenerQr($event)"></app-modal-escaner>
}